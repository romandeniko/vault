---
created: 2025-10-02T13:47:00
status:
links:
  - "[[Базы данных]]"
  - "[[Связи между таблицами]]"
---
На предыдущем шаге мы реализовали связь «**один ко многим**» для книг и авторов. Она означает, что каждый автор написал несколько книг, но каждую книгу написал только один автор. На самом деле, это не совсем верное утверждение. Например, книга «12 стульев» написана двумя авторами Ильфом И.А. и Петровым Е.П. С другой стороны, эти авторы написали и другие книги, например «Золотой теленок».

Для соединения таких таблиц используется связь «**многие ко многим**».

Связь «**многие ко многим**» имеет место когда каждой записи одной таблицы соответствует несколько записей во второй, и наоборот, каждой записи второй таблицы соответствует несколько записей в первой. Обозначается это так:

![](https://ucarecdn.com/e53a7a38-0b4e-4705-b07e-209dd8074e49/)

**Этапы реализации связи** «**многие ко многим**»  на следующем примере:

Один автор может написать несколько книг, а одна книга может быть написана несколькими авторами. Для каждой книги известны ее количество и цена.

1. Создать таблицу `**author**`,  в которую включить уникальных авторов книг, хранящихся на складе:

![](https://ucarecdn.com/3762c894-7798-4ff7-a254-4068635de34e/)

2. В обеих таблицах необходимо определить первичный ключ, в нашем случае в таблице **`book`** он уже есть, поэтому достаточно включить первичный ключ **`author_id`** в таблицу `**author**`:

![](https://ucarecdn.com/961abd2a-0a7c-42c4-ab52-b4e9cb2d9ceb/)

3. Создать новую таблицу-связку, состоящую из двух столбцов, соответствующих по имени и типу ключевым столбцам исходных таблиц. Каждый из этих столбцов является внешним ключом (`**FOREIGN KEY**`)  и связан с ключевым столбцом каждой таблицы. Для наглядности связи на схеме обозначаются стрелкой от ключевого столбца исходной таблицы к внешнему ключу связной таблицы.

![](https://ucarecdn.com/6943bc53-bbe5-410b-9264-00b20eb0f017/)

4. Дальше необходимо определиться с первичным ключом таблицы-связки. Можно сделать два ключевых столбца, тогда все записи в этой таблице должны быть уникальными, то есть не повторяться. Для связи автор-книга этот вариант подходит. Но в некоторых случаях записи в таблице-связке могут повторяться, например, если мы будем продавать книги покупателям (один человек может купить несколько книг, а одну и ту же книгу могут купить несколько человек). Тогда в таблицу-связку включают дополнительные столбцы для идентификации записей, например, дату продажи,  также в таблицу-связку добавляют первичный ключ. Мы воспользуемся вторым способом:

![](https://ucarecdn.com/9e4529dc-355a-4675-a782-a824fd11d4ce/)































