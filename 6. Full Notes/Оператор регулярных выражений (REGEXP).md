---
created: 2025-11-15
status:
links:
  - "[[Базы данных]]"
  - "[[SQL]]"
  - "[[Запросы SQL]]"
---
## Синтаксис
```sql
... WHERE table_field ~ 'pattern';   -- с учетом регистра
... WHERE table_field ~* 'pattern';  -- без учета регистра
```

Где pattern — это регулярное выражение, задающее шаблон поиска.

Некоторые символы имеют особое значение в регулярных выражениях и требуют экранирования (например, `. *  +  ?  [, ] (, ) {, } | \`).

Для экранирования таких символов используйте одинарный обратный слеш — `\`.

## Список специальных символов

|Символы и структуры|Чему соответствует|
|:--|:--|
|*|0 или более экземпляров предшествующей строки|
|+|1 или более экземпляров предшествующих строк|
|.|Любой одиночный символ|
|?|0 или 1 экземпляр предшествующей строки|
|^|Соответствует началу строки|
|$|Соответствует окончанию строки|
|[abc]|Любой символ, указанный в квадратных скобках|
|[^abc]|Любой символ, не указанный в квадратных скобках|
|[A-Z], [А-Я]|Соответствует любой заглавной букве латинского и кириллического алфавита соответственно|
|[a-z], [а-я]|Соответствует любой строчной букве латинского и кириллического алфавита соответственно|
|[0-9]|Соответствует любой цифре|
|p1\|p2\|p3|Соответствует любому из паттернов p1 или p2 или p3|
|{n}|n экземпляров предыдущей строки|
|{m,n}|от m до n экземпляров предыдущей строки|
## [Примеры с объяснением](https://sql-academy.org/ru/guide/operator-regexp#primery-s-obuyasneniem)

- **Получим всех пользователей, чьи имена начинаются на «John»:**
    
- ```sql
    SELECT * FROM Users WHERE name ~ '^John'
    ```
  
    Это выражение ищет строки, начинающиеся с «John». Символ ^ указывает на начало строки.
    
- **Выведем все школьные предметы, название которых оканчивается на букву «e» или «y»:**
    
- ```sql
    SELECT * FROM  Subject WHERE name ~ '[ey]$'
    ```
    
    В этом примере, [ey] определяет список возможных значений для паттерна $, определяющего, на что должна заканчиваться строка.
    
- **Найдём всех пользователей, чей адрес электронной почты oканчивается на «@outlook.com» или на «@icloud.com»:**
    
- ```sql
    SELECT * FROM Users WHERE email ~ '@(outlook\.com|icloud\.com)$'
    ```
    
    Здесь также используется $ для обозначения конца строки и | для указания нескольких вариантов.
    
- **Найдём всех пользователей, чей номер телефона не содержит цифр «2» и «8»:**
    
- ```sql
    SELECT * FROM Users WHERE phone_number ~ '^[^28]*$'
    ```
    
    В этом примере символ [^28] обозначает любой символ, кроме «2» и «8», а * означает любое количество таких символов. Символы ^ и $ указывают на начало и конец строки соответственно, гарантируя, что вся строка соответствует шаблону.
    
- **Найдём всех пользователей, чей номер телефона начинается на «+7»**
    
```sql
SELECT name, phone_number FROM Users WHERE phone_number ~ '^\+7'
```

|name|phone_number|
|---|---|
|Hideo Kojima|+7 401 452 0052|
|ClINT Eastwood|+7 401 722 0912|
|Brad Pitt|+7 401 741 3797|
|Johnny Depp|+7 401 195 7363|
|Pierce Brosnan|+7 401 749 3620|
|Sean Connery|+7 401 511 6783|

В этом примере ^ означает начало строки. То есть, мы ищем строки, которые начинаются с определённого шаблона.

Поскольку + является специальным символом в регулярных выражениях, его нужно экранировать одинарным обратным слэшем (\), чтобы он воспринимался как обычный символ +. В результате, \+ соответствует знаку + в строке.

В MySQL вместо тильды используется `REGEXP`.




























