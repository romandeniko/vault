---
created: 2025-10-08T13:55:00
status:
links:
  - "[[Базы данных]]"
  - "[[SQL]]"
  - "[[Запросы SQL]]"
---
Запросом на добавление можно добавить записи, отобранные с помощью запроса на выборку, который включает несколько таблиц:

```sql
INSERT INTO таблица (список_полей)
SELECT список_полей_из_других_таблиц
FROM 
    таблица_1 
    ... JOIN таблица_2 ON ...
    ...
```

**Пример**

В таблице `**supply**`  есть новые книги, которых на складе еще не было. Прежде чем добавлять их в таблицу `**book**`,  необходимо из таблицы `**supply**`отобрать новых авторов, если таковые имеются.

_Запрос:_

```sql
SELECT name_author, supply.author
FROM 
    author 
    RIGHT JOIN supply ON author.name_author = supply.author;
```

Поскольку таблица `**author**` и поле в таблице `**supply**` называются одинаково, желательно указывать полную ссылку на поле (`**supply.author**`), чтобы запрос был более читабельным.

_Результат:_

```sql
+------------------+------------------+
| name_author      | author           |
+------------------+------------------+
| Булгаков М.А.    | Булгаков М.А.    |
| Достоевский Ф.М. | Достоевский Ф.М. |
| Есенин С.А.      | Есенин С.А.      |
| Пастернак Б.Л.   | Пастернак Б.Л.   |
| Лермонтов М.Ю.   | Лермонтов М.Ю.   |
| None             | Стивенсон Р.Л.   |
+------------------+------------------+
```

Выполнив правое внутреннее соединение таблиц, получили значение `Null (None)` в поле `**name_author**` в строке того автора, которого нет в таблице `**author**`, в нашем случае это Стивенсон.

Теперь достаточно в запросе задать условие отбора, и список новых авторов готов для включения в таблицу `**author**`.

_Запрос:_

```sql
SELECT supply.author
FROM 
    author 
    RIGHT JOIN supply on author.name_author = supply.author
WHERE name_author IS Null;
```

_Результат:_

```sql
+----------------+
| author         |
+----------------+
| Стивенсон Р.Л. |
+----------------+
```

```sql
INSERT INTO author (name_author)
SELECT supply.author
FROM
    author RIGHT JOIN supply
    ON author.name_author = supply.author
WHERE name_author IS NULL;

SELECT * FROM author;
```

```sql
INSERT INTO book (title, author_id, genre_id, price, amount)
SELECT title, author_id, NULL, price, amount
FROM
    author INNER JOIN supply
    ON author.name_author = supply.author
WHERE amount <> 0;

SELECT * FROM book;
```





























